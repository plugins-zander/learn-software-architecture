# 评估概述

软件体系结构评估概述

## 评估关注的质量属性

### 概述

- 软件体系结构的设计是整个软件开发过程中关键的一步。

- 对于当今世界上庞大而复杂的系统来说，如果没有一个合适的体系结构而要有一个成功的软件设计几乎是不可想象的。

- 不同类型的系统需要不同的体系结构，甚至一个系统的不同子系统也需要不同的体系结构。体系结构的选择是一个软件系统设计成败的关键。
  - 但是，怎样才能知道为软件系统所选用的体系结构是否恰当？
  - 如何确保按照所选用的体系结构能顺利地开发出成功的软件产品呢？

- 体系结构评估可以只针对一个体系结构，也可以针对一组体系结构。

### 质量属性

在体系结构评估过程中，评估人员所关注的是系统的质量属性，所有评估方法所普遍关注的质量属性有以下几个。
- #### 性能

  - 性能是指系统的响应能力，即要经过多长时间才能对某个事件作出响应，或者在某段时间内系统所能处理的事件的个数。
  - 经常用单位时间内所处理事务的数量或系统完成某个事务处理所需的时间来对性能进行定量的表示。
  - 性能测试经常要使用基准测试程序(用以测量性能指标的特定事务集或工作量环境)。 
- #### 可靠性

  - 可靠性是软件系统在应用或系统错误面前、在意外或错误使用的情况下维持软件系统的功能特性的基本能力。
  - 可靠性是最重要的软件特性，通常用它衡量在规定的条件和时间内，软件完成规定功能的能力。
  - 可靠性通常用平均失效等待时间(Mean Time To Failure，MTTF)(指软件在失效前正常工作的平均统计时间 )和平均失效间隔时间(Mean Time Between Failure，MTBF)来衡量。
  - 在失效率为常数和修复时间很短的情况下，MTTF和MTBF几乎相等。MTBF可用下式表示：
    - MTBF = MTTF + MTTR(平均修复时间)
  - 可靠性可以分为两个方面
    - 容错
      - 其目的是在错误发生时确保系统正确的行为，并进行内部“修复”。
      - 例如在一个分布式软件系统中失去了一个与远程构件的连接，接下来恢复了连接。
      - 在修复这样的错误之后，软件系统可以重新或重复执行进程间的操作直到错误再次发生。
    - 健壮性
      - 其能保护应用程序不受错误使用和错误输入的影响，在遇到意外错误事件时确保应用系统处于已经定义好的状态。
      - 和容错相比，健壮性并不是在错误发生时软件可以继续运行，它只能保证软件按照某种已经定义好的方式终止执行。
      - 软件体系结构对软件系统的可靠性有巨大的影响。
      - 例如，软件体系结构通过在应用程序内部包含冗余、集成监控控件和异常处理来支持可靠性。
- #### 可用性

  - 可用性是系统能够正常运行的时间比例。
  - 经常用两次故障之间的时间长度或在出现故障时系统能够恢复正常的速度来表示。 
- #### 安全性

  - 安全性是指系统在向合法用户提供服务的同时能够阻止非授权用户使用的企图或拒绝服务的能力。
  - 安全性是根据系统可能受到的安全威胁的类型来分类的。
  - 安全性又可划分为机密性、完整性、不可否认性及可控性等特性。
    - 机密性保证信息不泄露给未授权的用户、实体或过程
    - 完整性保证信息的完整和准确，防止信息被非法修改
    - 不可否认性是指正确认定发送者，使之不能否认已发送过的数据的过程
    - 可控性保证对信息的传播及内容具有控制的能力，防止为非法者所用。
- #### 可修改性

  - 可修改性是指能够快速地以较高的性能代价比对系统进行变更的能力。
  - 通常以某些具体的变更为基准，通过考察这些变更的代价衡量可修改性。
  - 可修改性包含四个方面：
    - (1) 可维护性
      - 这主要体现在问题的修复上；在错误发生后“修复”软件系统。
      - 做好为可维护性准备的软件体系结构往往能做局部性的修改并能使对其他构件的负面影响最小化。
    - (2) 可扩展性
      - 这一点关注的是使用新特性来扩展软件系统，以及使用改进版本来替换构件并删除不需要或不必要的特性和构件。
      - 为了实现可扩展性，软件系统需要松散耦合的构件。
      - 其目标是实现一种体系结构，它能使开发人员在不影响构件客户的情况下替换构件。
      - 支持把新构件集成到现有的体系结构中也是必要的。
    - (3) 结构重组
      - 这一点处理的是重新组织软件系统的构件及构件间的关系，例如通过将构件移动到一个不同的子系统而改变它的位置。
      - 为了支持结构重组，软件系统需要精心设计构件之间的关系。
      - 理想情况下，它们允许开发人员在不影响实现的主体部分的情况下灵活地配置构件。
    - (4) 可移植性
      - 可移植性使软件系统适用于多种硬件平台、用户界面、操作系统、编程语言或编译器。
      - 为了实现可移植，需要按照硬件无关的方式组织软件系统，其他软件系统和环境被提取出。
      - 可移植性是系统能够在不同计算环境下运行的能力。
      - 这些环境可能是硬件、软件，也可能是两者的结合。
      - 在关于某个特定计算环境的所有假设都集中在一个构件中时，系统是可移植的。
      - 如果移植到新的系统需要作些更改，则可移植性就是一种特殊的可修改性。
- #### 功能性

  - 功能性是系统能完成所期望的工作的能力。一项任务的完成需要系统中许多或大多数构件的相互协作。
- #### 可变性

  - 可变性是指体系结构经扩充或变更而成为新体系结构的能力。
  - 这种新体系结构应该符合预先定义的规则，在某些具体方面不同于原有的体系结构。
  - 当要将某个体系结构作为一系列相关产品(例如，软件产品线)的基础时，可变性是很重要的。 
- #### 可集成性

  - 可集成性是指系统能与其他系统协作的程度。
- #### 互操作性

  - 作为系统组成部分的软件不是独立存在的，经常与其他系统或自身环境相互作用。
  - 为了支持互操作性，软件体系结构必须为外部可视的功能特性和数据结构提供精心设计的软件入口。
  - 程序和用其他编程语言编写的软件系统的交互作用就是互操作性的问题，这种互操作性也影响应用的软件体系结构。

## 评估的必要性

Barry Boehm说过，“匆忙之中选择某个体系结构，闲暇之时就会深深懊悔”。糟糕的体系结构实际上宣判了项目的死刑。

关于评估的必要性有以下三点：
- (1) 软件体系结构反映了系统最初始的设计决策
  - 对同样一个问题，在初始阶段纠正所带来的花费和在测试或部署阶段纠正导致的开销不在一个数量级。
  - 毕竟在体系结构视图上一个符号改动比后期大规模的代码改动工作量要少得多，这样，巨大的额外开销就避免了。
  - 有了对体系结构的完整描述，退一步讲即使是部分描述，也能模拟系统运行时的行为，对一些设计思想进行探讨，并推断体系结构应用于系统时的潜在影响。
  - 而所有这些工作只不过需要整个项目周期中的几天时间。
- (2) 评估是挖掘隐性需求并将其补充到设计中的最后机会
  - 由于缺乏充分的交流和不能对软件项目透彻理解，许多涉众并不知道自己到底想要什么。
  - 在需求获取阶段，他们会列出自认为最重要的几项要求。但是评估之后，这些观点可能会变动很大。
  - 有些起初重视的方面可能并不是那么重要，而另一些本来看上去无关紧要的东西却被发现需要花更多精力来处理。 
  - 在评估过程中，涉众会感受到群体力量的强大，同时对自己的参与带来的正面影响也很振奋。
  - 而架构师会在此阶段的活动中了解涉众的各种想法，调整初始设计以做出权衡(也可能是对候选体系结构的对比和选择)。
  - 对架构师来讲，这也是加深对待建系统理解的好机会。
  - 总之，体系结构评估清除了涉众的沟通障碍。其最直接的结果就是得到各方满意的系统蓝图，而这至少意味着项目成功了一半。
- (3) 体系结构是开发过程的中心，它决定了团队组织、任务分配、配置管理、文档组织、管理策略，当然还有开发进程安排。
  - 不良体系结构往往带来一塌糊涂的效果，因为它在被使用过程中必须被修改以适应新的考量，或者去弥补那些在开发早期阶段没有考虑到的缺陷，在这些方面进行修改需要花费大量成本。 
  - 更糟糕的是，团队会面临着项目失控的可怕境遇：改了旧错误带来了更多的新错误；过时的体系结构会破坏现有的开发团队结构，而这又进一步干扰了开发工作；客户、管理层和开发者都急切地盼望者噩梦结束，但谁都不知道这样的日子何时到来。
  - 如果在这些发生之前充分分析一下体系结构就可以部分避免这些问题的发生。
  - 因此，体系结构想要付诸实践的话，就必须被评估。
# 事件驱动风格

事件驱动风格

- 特点

  - 系统是由若干子系统或元素所组成的一个整体
  - 系统有一定的目标，各子系统在某一种消息机制的控制下，为了这个目标而协调行动
  - 在某一种消息机制的控制下，系统作为一个整体与环境相适应和协调
  - 在一个系统的若干子系统中，必定有一个子系统起着主导作用，而其他子系统则处于从属地位；
  - 任一系统和系统内的任一元素，都有1个事件收集机制和1个事件处理机制，通过这种机制与周围环境发生作用和联系；

- 基于事件驱动的软件系统的示意图

  - 

    ![img](https://mubu.com/document_image/a7a6df85-519c-4fec-8b35-62545741e5f3-4644403.jpg)

- 事件驱动风格系统设计时有下述几条基本原则

  - 从系统论的角度来看待描述的对象，合理分解子系统，保证各个子系统的独立性和社会性；
  - 无论系统多么复杂，子系统性质的差异多么大，任何子系统都可以按照有无子系统这一性质分为2类：管理系统和执行系统。
  - 为了达到系统的目标，系统内的各个子系统通过传递消息和执行消息来协同操作。
  - 为了达到系统的目标，系统内的各个子系统通过传递消息和执行消息来协同操作。
  - 在一个完整系统中，必须有这样一个子系统，它没有上级，必须收集系统外的事件及下级发出的事件。
  - 管理类型的子系统一般不执行具体操作，它的主要功能是按照自己的职能指挥下级完成任务，功能性操作一般由执行类型的子系统完成。
  - 在一般情况下，除最高级管理子系统外，子系统一般是“有问才答”，即使在必要的情况下需要积极寻找事件时，也必须征得上级系统得许可，保证了系统的控制流不会分散。

- 事件驱动风格基本结构

  - 事件驱动系统具有某种意义上的递归性，形成了“部分－整体”的层次结构，可以用属性结构加以表示。

  - 一个简单的表示方法是为执行系统定义一些类，另外定义一些类作为这些执行系统的容器类，也就是管理系统。

  - 图示

    - 

      ![img](https://mubu.com/document_image/9e9c0edd-9000-4ad9-a601-01c5d22116e5-4644403.jpg)

- 事件驱动风格实例

  - Java中的button实现

    ![img](https://mubu.com/document_image/79325402-393f-472a-bd4e-1bcf5b4b715e-4644403.jpg)

    ![img](https://mubu.com/document_image/98cf9674-7583-43fb-a6d3-9c4570579dee-4644403.jpg)

    ![img](https://mubu.com/document_image/8af833a7-5e4e-4ba6-b8c9-25d861a0629e-4644403.jpg)

- 优点

  - 事件驱动风格非常适合于描述系统族，在属于同一族的任何系统中，系统的高级管理子系统的描述是完全类似的，便于重用；
  - 由于最高管理子系统牢牢的掌握着控制权，又因为各同级子系统一般不直接发生关系，因此容易实现并发处理和多任务操作；
  - 基于事件驱动风格的系统具有良好的可扩展性，设计者只需为某个对象注册一个事件处理接口就可以将该对象引入整个系统，同时并不影响其它的系统对象。
  - 定义了包含执行子系统和管理子系统的类层次结构；
  - 简化客户代码；
  - 使整个系统的设计更具有一般化。

- 缺点

  - 事件驱动风格最大的不足在于构件削弱了自身对系统计算的控制能力
  - 事件驱动风格中存在的另一个问题在于数据共享
  - 系统中各个对象的逻辑关系变得更加复杂

- 事件驱动风格和面向对象风格的关系

  - 基于面向对象风格的系统由多个封装起来的对象构成，对象之间通过消息传递实现通信，而事件驱动正是对消息传递机制的一种实现。
  - 所以基于事件驱动风格的系统往往都是面向对象的。
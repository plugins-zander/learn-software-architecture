# SAAM方法评估实例

SAAM方法评估实例

我们在本节介绍一个使用SAAM方法的实例。 我们使用SAAM方法对介绍过的KWIC(在文章中查找和重组关键词)系统中的不同场景进行评估。

- 定义角色和场景

  - KWIC系统感兴趣的角色有两个，分别是最终用户和开发人员。使用四个场景，其中两个场景经过了不同的最终用户的讨论，即
    - (1) 修改KWIC程序，使之成为一个增量方式而不是批处理的方式。这个程序版本将能一次接受一个句子，产生一个所有置换的字母列表。
    - (2) 修改KWIC程序，使之能删除在句子前端的噪音单词(例如前置词、代名词、连词等)。
  - 使用的另外两个场景是经过开发人员讨论，但最终用户不知道的，即
    - (1) 改变句子的内部表示(例如，压缩和解压缩)。
    - (2) 改变中间数据结构的内部表示(例如，可直接存储置换后的句子，也可存储转换后的词语的地址)。

- 描述体系结构

  - 第2步就是使用通用的表示对待评估的体系结构进行描述，这种描述是为了使评估过程更容易，使评估人员知道体系结构图中的框或箭头的准确含义。

  - 这里对两种体系结构风格进行评估。

    - 共享内存的解决方案

      - 在第一个待评估的体系结构中，有一个全局存储区域，被称做Sentences，用来存储所有输入的句子。

      - 其执行的顺序是：输入例程读入句子→存储句子→循环转换例程转换句子→字母例程按字母顺序排列句子→输出。

      - 当需要时，主控程序传递控制信息给不同的例程。

      - 图7-7描述了这个过程，不同计算构件上的数字代表场景编号，在这一步中可忽略(将在后面用到)。

        - 

          ![img](https://img1.zlogs.net/20/20200115192032.png)

    - 抽象数据类型解决方案

      - 待评估的第2个体系结构使用抽象数据类型(Abstract Data Type，ADT)，如图7-8所示。

        - 

          ![img](https://img1.zlogs.net/20/20200115192033.png)

      - 其中每个功能都隐藏和保护了其内部数据表示，提供专门的存取函数作为唯一的存储、检索和查询数据的方式。

      - ADT Sentences有两个函数，分别是set和getNext，用来增加和检索句子；ADT Shifted Sentences提供了存取函数setup和getNext，分别用来建立句子的循环置换和检索置换后的句子。

      - ADT Shifted Sentences使用ADT Sentences的getNext函数来重新存储输入的句子。

      - ADT Alphabetized Sentences提供了一个setup函数和一个i-th函数，setup函数重复调用Shifted Sentences的getNext函数，以检索已经存储的所有行并进行排序，i-th函数根据参数i，从存储队列中返回第i个句子。

- 评估体系结构

  - 既然已经把待评估的体系结构用通用的符号标记了出来，接下来就是评估体系结构满足场景的程度。

  - 通过依次考虑每个场景来进行评估。

  - 我们所选择的用来评估的所有场景都是间接场景，也就是说，这些场景不能被待评估的体系结构直接执行，因此评估依赖于体系结构的某些修改。

    - (1) 场景1。第一个场景是从批处理模式转移到增量模式，也就是说，不是把所有句子都输入完后再一次性进行处理，而是一次只处理一个句子。

      - 对共享内存解决方案而言，这需要修改Input例程，使之在读入一个句子后让出控制权，同时，也要修改Master Control主控程序，因为子例程不再是按顺序一次只调用一个，而是一个迭代调用的过程。还要修改Alphabetizer例程，因为使用增量模式后，牵涉到插入排序的问题。我们假设Circular Shift例程一次只处理一个句子，且输出函数只要被调用，就可以输出。
      - 注意，我们所作的假设只是针对共享内存解决方案而言的，一般来说，判断的准确性取决于不同的计算构件的内部工作知识。这也是为什么要期望评估人员中，既有具有计算构件一般知识的人，也有具有特定构件知识的人。
      - 对抽象数据类型解决方案而言，Input函数需要修改，使之在被调用时，一次只输入一行。假设Sentence当存储了输入之后放弃控制权，则无需改变。也假设当Shifted Sentences被调用时，能请求和转换所有可获得的句子，这样，该例程也无须改变。与在共享内存解决方案中一样，Alphabetized Sentences也必须修改。
      - 综上所述，对第一个场景而言，两个待评估的体系结构受到的影响是均等的，因此，我们判定其为中性的。

    - (2) 场景2。第二个场景要求删除句子中的“噪音”单词。

      - 无论在共享内存解决方案还是在抽象数据类型解决方案中，这种需求均可通过修改转换函数很容易地实现(在共享内存体系结构中，修改Circular Shift函数；在抽象数据类型体系结构中，修改Shifted Sentences函数)。
      - 因为在两种体系结构中，转换函数都是局部的，且噪音单词的删除不会影响句子的内部表示，所以，对两种体系结构而言，这种修改是等价的。

    - (3) 场景3。第三个场景要求改变句子的内部表示，例如从一个未压缩的表示转换到压缩的表示。

      - 在共享内存体系结构中，所有函数共享一个公用的表示，因此，除了主控函数Master Control外，所有函数都受该场景的影响。
      - 在抽象数据类型中，输入句子的内部表示由Sentence提供缓冲。因此，就第三个场景而言，抽象数据类型体系结构比共享内存的体系结构要好。

    - (4) 场景4。第四个场景要求改变中间数据结构的内部表示(例如，既可直接存储置换后的句子，也可存储转换后的词语的地址)。

      - 对于共享内存体系结构，需要修改Circular Shift、Alphabetize和Output三个例程。对于抽象数据类型体系结构，需要修改抽象数据类型中的Shifted Sentences和Alphabetized Sentences。
      - 因此，抽象数据类型解决方案所受影响的构件数量要比共享内存体系结构解决方案的少。 

    - (5) 比较分析

      - 图7-7和图7-8都标记了反映每个场景的影响。
      - 例如，在图7-7中，Master Control构件中的“1”反映了该构件必须修改以支持场景1。
      - 检查待评估体系结构，看其有多少个构件受场景的影响，每个构件最多受多少个场景的影响。
      - 从这方面来看，抽象数据类型体系结构要比共享内存体系结构好。
      - 在共享内存体系结构和抽象数据类型体系结构中，两者都有4个构件受场景的影响，但是，在共享内存体系结构中，有两个构件(Circular Shift和Alphabetize)受三个场景的影响，而在抽象数据类型体系结构中，所有构件最多只受两个场景的影响。

    - (6) 评估结果。

      - 表7-5概括了评估的结果，其中0表示对该场景而言，两个体系结构不分好坏，在实际的评估中，还需要根据组织的偏好设置场景的优先级。

      - 表7-5

        - 

          ![img](https://img1.zlogs.net/20/20200115192034.png)

      - 例如，如果功能的增加是风险承担者最关心的问题(就像第2个场景一样)， 那么这两个体系结构是不相上下的，因为在这一点上，它们之间没有什么区别。

      - 但是，如果句子内部表示的修改是风险承担者最关心的问题(就像第3个场景一样)，那么抽象数据类型体系结构显然是要首选的体系结构。

      - 使用SAAM方法评估系统的结果通常容易理解，容易解释，而且和不同组织的需求目标联系在一起。开发人员、维护人员、用户和管理人员会找到对他们关心的问题的直接回答，只要这些问题是以场景的方式提出的。